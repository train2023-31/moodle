define("tool_mulib/form_autocomplete/ajax_handler",["exports","core/ajax","core/str"],(function(_exports,_ajax,_str){var obj;
/**
   * Ajax helper for autocomplete form elements.
   *
   * NOTE: this file is based on /user/amd/src/form_user_selector.js
   *
   * @module     tool_mulib/form_autocomplete/ajax_handler
   * @copyright  2025 Petr Skoda
   * @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   **/Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.processResults=function(selector,results){return results},_exports.transport=async function(selector,query,callback,failure){const methodname=document.querySelector(selector).dataset.methodname;let args=document.querySelector(selector).dataset.args;args=JSON.parse(args),args instanceof Array&&(args={});args.query=null!=query?query:"";const request={methodname:methodname,args:args};try{const response=await _ajax.default.call([request])[0];if(response.overflow){const msg=await(0,_str.getString)("toomanyitemsfound","tool_mulib",response.maxitems);callback(msg)}else callback(response.list)}catch(e){failure(e)}},_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj}}));

//# sourceMappingURL=ajax_handler.min.js.map