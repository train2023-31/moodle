define("gradereport_singleview/singleview",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){if(initialized)return;initialized=!0,document.addEventListener("keydown",keydownHandler,!0),document.querySelectorAll(selectors_override).forEach((input=>{input.addEventListener("change",(()=>{!function(input){const checked=input.checked,[,itemid,userid]=input.getAttribute("name").split("_"),interest="_".concat(itemid,"_").concat(userid);document.querySelectorAll(selectors_input(interest)).forEach((text=>{text.disabled=!checked})),document.querySelectorAll(selectors_select(interest)).forEach((select=>{select.disabled=!checked}))}(input)}))}))};
/**
   * Allow navigation through table cells using Ctrl + arrow keys and handle override toggles.
   *
   * @module    gradereport_singleview/singleview
   * @copyright The Open University
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const selectors_cell="td.cell, th.cell",selectors_col="td, th",selectors_keyboardHandled="table input, table select, table a",selectors_navigableCell='input:not([type="hidden"]):not([disabled]), select, a',selectors_override="input[name^=override_]",selectors_row="tr",selectors_input=interest=>"input[name$='".concat(interest,"'][data-uielement='text']"),selectors_select=interest=>"select[name$='".concat(interest,"']");let initialized=!1;function keydownHandler(event){if(!event.ctrlKey)return;if(!["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(event.key))return;const activeElement=document.activeElement;if(!activeElement.matches(selectors_keyboardHandled))return;let next=null;switch(event.key){case"ArrowLeft":next=getPrevCell(activeElement.closest(selectors_col));break;case"ArrowUp":next=getAboveCell(activeElement.closest(selectors_col));break;case"ArrowRight":next=getNextCell(activeElement.closest(selectors_col));break;case"ArrowDown":next=getBelowCell(activeElement.closest(selectors_col))}var _next$querySelector;(event.preventDefault(),event.stopImmediatePropagation(),next)&&(null===(_next$querySelector=next.querySelector(selectors_navigableCell))||void 0===_next$querySelector||_next$querySelector.focus())}function getNextCell(cell){var _checkElement$nextEle;const checkElement=cell||document.activeElement,next=null!==(_checkElement$nextEle=checkElement.nextElementSibling)&&void 0!==_checkElement$nextEle&&_checkElement$nextEle.matches(selectors_cell)?checkElement.nextElementSibling:null;return next?next.querySelector(selectors_navigableCell)?next:getNextCell(next):null}function getPrevCell(cell){var _checkElement$previou;const checkElement=cell||document.activeElement,prev=null!==(_checkElement$previou=checkElement.previousElementSibling)&&void 0!==_checkElement$previou&&_checkElement$previou.matches(selectors_cell)?checkElement.previousElementSibling:null;return prev?prev.querySelector(selectors_navigableCell)?prev:getPrevCell(prev):null}function getAboveCell(cell){const checkElement=cell||document.activeElement,tr=checkElement.closest(selectors_row).previousElementSibling,columnIndex=getColumnIndex(checkElement);if(!tr)return null;const next=tr.querySelectorAll(selectors_col)[columnIndex];return null!=next&&next.querySelector(selectors_navigableCell)?next:getAboveCell(next)}function getBelowCell(cell){const checkElement=cell||document.activeElement,tr=checkElement.closest("tr").nextElementSibling,columnIndex=getColumnIndex(checkElement);if(!tr)return null;const next=tr.querySelectorAll("td, th")[columnIndex];return null!=next&&next.querySelector(selectors_navigableCell)?next:getBelowCell(next)}function getColumnIndex(cell){const rowNode=cell.closest(selectors_row);if(!rowNode||!cell)return-1;return Array.from(rowNode.querySelectorAll(selectors_col)).indexOf(cell)}}));

//# sourceMappingURL=singleview.min.js.map